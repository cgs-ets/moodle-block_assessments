define(["jquery","core/log","core/ajax"],function(e,a,r){"use strict";return{init:function(n){var o;a.debug("block_assessments: initializing"),n?(o=e(".block_assessments .root").first()).length?(o.on("click",".block_assessments_toggle",function(s){s.preventDefault();s=o.attr("data-toggle");a.debug("block_assessments: Toggle currently "+s);var s="1"==s?0:1,e=n,t=o;a.debug("block_assessments: Setting toggle to "+s),t.attr("data-toggle",s+""),t=[{name:"block_assessments_toggle",value:s,userid:e}],r.call([{methodname:"core_user_set_user_preferences",args:{preferences:t},done:function(s){console.log(s)}}])}),o.on("click",".btn-showpast",function(s){s.preventDefault(),1==o.data("showingpast")?(o.find('tr.assessment[data-eventorder="Past"]').hide(),o.data("showingpast",!1),e(this).html("Show past assessments")):(o.find('tr.assessment[data-eventorder="Past"]').show(),o.data("showingpast",!0),e(this).html("Hide past assessments"))})):a.error("block_assessments: root element not found!"):a.error("block_assessments: userid not provided!")}}});